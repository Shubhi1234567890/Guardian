!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@tensorflow/tfjs-core")):"function"==typeof define&&define.amd?define(["exports","@tensorflow/tfjs-core"],t):t((e=e||self).sentiment=e.sentiment||{},e.tf)}(this,(function(e,t){"use strict";var n="https://storage.googleapis.com/tfjs-models/tfjs/sentiment_cnn_v1/model.json",r="https://storage.googleapis.com/tfjs-models/tfjs/sentiment_cnn_v1/vocab.json",i=50,s="<PAD>",a="<START>",o="<UNKNOWN>";function c(e,t,n,r){const i=Object.assign({},n);return i[a]=1,i[s]=0,i[o]=2,Object.freeze(i)}function l(e){const n=e.split(" ").map(e=>(e=e.toLowerCase().replace(/[^a-zA-Z0-9 ]/g,""),e.length>0?e:null)).filter(e=>null!=e);return t.util.assert(n.length>0,"The input text is either empty or contains only non-alphanumeric characters."),n}function d(e,t,n){const r=l(e).map(e=>{const n=t[e];return null==n?o:n});return function(e,t,n,r){const i=new Array(t).fill(n);i[0]=r;const s=e.slice(0,t-1);for(let e=0;e<s.length;++e)i[e+1]=s[e];return i}(r,n,t[s],t[a])}class u{constructor(){}async load(){const[e,t]=await Promise.all([this.loadModel(),this.loadVocab()]);return this.model=e,this.vocabulary=c(t),this}async loadModel(e=n){return await t.loadLayersModel(e)}async loadVocab(e=r){return await(await t.util.fetch(e)).json()}predict(e){const n=t.tidy(()=>{const n=t.tensor2d([d(e,this.vocabulary,i)],[1,i],"int32");return this.model.predict(n)}),r=n.dataSync();return n.dispose(),{score:r[0]}}}e.BACKGROUND_IO_HANDLER_URL=n,e.load=async function(e=n,r=i){const s=new u;await s.load();return s},e.loadSentimentModel=async function(e=n){return await t.loadLayersModel(e)},e.loadVocabulary=async function(e=r){return await(await t.util.fetch(e)).json()},e.padSequences=d,e.tokenize=l,e.vocabulary=c,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=sentiment.min.js.map